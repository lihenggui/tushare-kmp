# 业绩预告

## 接口名称：`forecast`

## 接口说明
- 获取 **上市公司业绩预告** 数据。
- **数据起始时间**：支持历史数据查询。
- **单次最大提取 1000 条数据**，可根据日期参数循环获取。
- **积分要求**：
  - **2000 积分** 以上用户可调用。
  - **5000 积分** 以上用户可使用 `forecast_vip` 接口获取某一季度全部上市公司数据。

---

## **输入参数**

| 名称        | 类型  | 必选 | 描述 |
|------------|------|------|------------------------------|
| ts_code    | str  | N    | 股票代码（二选一） |
| ann_date   | str  | N    | 公告日期（二选一，格式：`YYYYMMDD`） |
| start_date | str  | N    | 公告开始日期（格式：`YYYYMMDD`） |
| end_date   | str  | N    | 公告结束日期（格式：`YYYYMMDD`） |
| period     | str  | N    | 报告期（每个季度最后一天的日期，如 `20171231` 表示年报，`20170630` 表示半年报，`20170930` 表示三季报） |
| type       | str  | N    | 预告类型（预增/预减/扭亏/首亏/续亏/续盈/略增/略减） |

---

## **输出参数**

| 名称          | 类型  | 描述 |
|--------------|------|------------------------------|
| ts_code      | str  | TS 股票代码 |
| ann_date     | str  | 公告日期 |
| end_date     | str  | 报告期 |
| type         | str  | 业绩预告类型（预增/预减/扭亏/首亏/续亏/续盈/略增/略减） |
| p_change_min | float | 预告净利润变动幅度下限（%） |
| p_change_max | float | 预告净利润变动幅度上限（%） |
| net_profit_min | float | 预告净利润下限（万元） |
| net_profit_max | float | 预告净利润上限（万元） |
| last_parent_net | float | 上年同期归属母公司净利润 |
| first_ann_date | str  | 首次公告日 |
| summary      | str  | 业绩预告摘要 |
| change_reason | str  | 业绩变动原因 |

---

## **接口示例**

### **获取单日业绩预告**
```python
import tushare as ts

# 设置 Tushare Token（请在 Tushare 个人中心获取）
ts.set_token('你的token')

pro = ts.pro_api()

# 获取 2019-01-31 公布的业绩预告
df = pro.forecast(ann_date='20190131', 
                  fields='ts_code,ann_date,end_date,type,p_change_min,p_change_max,net_profit_min')
```

---

### **获取某一季度全部上市公司业绩预告**
```python
# 获取 2018 年报（2018-12-31）的所有上市公司业绩预告（需要 5000 积分）
df = pro.forecast_vip(period='20181231', 
                      fields='ts_code,ann_date,end_date,type,p_change_min,p_change_max,net_profit_min')
```

---

## **数据样例**

| ts_code  | ann_date | end_date | type | p_change_min | p_change_max | net_profit_min |
|----------|---------|---------|------|-------------|-------------|---------------|
| 000005.SZ | 20190131 | 20181231 | 预增 | 618.56 | 945.18 | NaN |
| 000825.SZ | 20190131 | 20181231 | 略增 | 3.85 | 12.51 | NaN |
| 000566.SZ | 20190131 | 20181231 | 预增 | 50.00 | 100.00 | NaN |
| 000932.SZ | 20190131 | 20181231 | 预增 | 60.89 | 68.17 | NaN |
| 000557.SZ | 20190131 | 20181231 | 预增 | 66.68 | 66.68 | NaN |
| 600127.SH | 20190131 | 20181231 | 首亏 | -601.55 | -510.36 | NaN |
| 600159.SH | 20190131 | 20181231 | 预增 | 315.00 | 315.00 | NaN |
| 600963.SH | 20190131 | 20181231 | 略增 | 2.38 | 11.58 | NaN |
| 002336.SZ | 20190131 | 20181231 | 续亏 | 33.14 | 47.99 | NaN |
| 601608.SH | 20190131 | 20181231 | 预增 | 228.59 | 274.57 | NaN |
| 600531.SH | 20190131 | 20181231 | 预减 | -61.88 | -54.32 | NaN |
| 300200.SZ | 20190131 | 20181231 | 预增 | 82.40 | 112.40 | NaN |
| 300441.SZ | 20190131 | 20181231 | 略减 | -20.51 | -0.64 | NaN |
| 300157.SZ | 20190131 | 20181231 | 扭亏 | 107.40 | 108.52 | NaN |
| 300052.SZ | 20190131 | 20181231 | 略减 | -30.00 | 0.00 | NaN |
| 002328.SZ | 20190131 | 20181231 | 略增 | 0.00 | 20.00 | NaN |
| 300420.SZ | 20190131 | 20181231 | 预增 | 61.15 | 90.80 | NaN |
| 300109.SZ | 20190131 | 20181231 | 续盈 | -13.81 | 7.73 | NaN |
| 300479.SZ | 20190131 | 20181231 | 略减 | -35.84 | -6.67 | NaN |
| 000402.SZ | 20190131 | 20181231 | 略增 | 1.00 | 10.00 | NaN |
| 002626.SZ | 20190131 | 20181231 | 略增 | 37.12 | 47.66 | NaN |
