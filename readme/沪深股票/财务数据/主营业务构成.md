# 主营业务构成

## 接口名称：`fina_mainbz`

## 接口说明
- 获取 **上市公司主营业务构成** 数据，支持 **按产品（P）、按地区（D）、按行业（I）** 三种方式查询。
- **数据起始时间**：支持历史数据查询。
- **单次最大提取 100 条数据**，可通过 **循环请求** 获取更多数据。
- **积分要求**：
  - **2000 积分** 以上用户可调用。
  - **5000 积分** 以上用户可使用 `fina_mainbz_vip` 接口获取某一季度全部上市公司数据。

---

## **输入参数**

| 名称        | 类型  | 必选 | 描述 |
|------------|------|------|------------------------------|
| ts_code    | str  | Y    | 股票代码（如 `600000.SH` / `000001.SZ`） |
| period     | str  | N    | 报告期（每个季度最后一天的日期，如 `20171231` 表示年报，`20170630` 表示半年报，`20170930` 表示三季报） |
| type       | str  | N    | 类型（`P` 按产品，`D` 按地区，`I` 按行业，需输入大写字母） |
| start_date | str  | N    | 报告期开始日期（格式：`YYYYMMDD`） |
| end_date   | str  | N    | 报告期结束日期（格式：`YYYYMMDD`） |

---

## **输出参数**

| 名称          | 类型  | 描述 |
|--------------|------|------------------------------|
| ts_code      | str  | TS 代码 |
| end_date     | str  | 报告期 |
| bz_item      | str  | 主营业务来源 |
| bz_sales     | float | 主营业务收入（元） |
| bz_profit    | float | 主营业务利润（元） |
| bz_cost      | float | 主营业务成本（元） |
| curr_type    | str  | 货币代码 |
| update_flag  | str  | 是否更新 |

---

## **接口示例**

### **获取单只股票的主营业务构成（按产品）**
```python
import tushare as ts

# 设置 Tushare Token（请在 Tushare 个人中心获取）
ts.set_token('你的token')

pro = ts.pro_api()

# 获取 000627.SZ（天茂集团）的主营业务构成（按产品）
df = pro.fina_mainbz(ts_code='000627.SZ', type='P')
```

---

### **获取某一季度全部上市公司主营业务构成**
```python
# 获取 2018 年报（2018-12-31）的所有上市公司主营业务构成（按产品，需要 5000 积分）
df = pro.fina_mainbz_vip(period='20181231', type='P', fields='ts_code,end_date,bz_item,bz_sales')
```

---

## **数据样例**

| ts_code  | end_date | bz_item | bz_sales | bz_profit | bz_cost | curr_type |
|----------|---------|---------|---------|----------|--------|-----------|
| 000627.SZ | 20171231 | 其他产品 | 1.85e+08 | None | None | CNY |
| 000627.SZ | 20171231 | 其他主营业务 | 1.85e+08 | None | None | CNY |
| 000627.SZ | 20171231 | 聚丙烯 | 6.63e+07 | None | None | CNY |
| 000627.SZ | 20171231 | 原料药产品 | 2.69e+08 | None | None | CNY |
| 000627.SZ | 20171231 | 保险业务 | 5.29e+10 | None | None | CNY |
